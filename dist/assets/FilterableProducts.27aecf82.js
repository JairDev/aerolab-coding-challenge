import{r as i,A as u,d as m,c as h,j as o,F as g,a as t,B as y,L as v,P as x}from"./index.0fe266d3.js";const b="https://coding-challenge-api.aerolab.co/products",w=[{value:"recent",label:"Most Recent"},{value:"lowest-price",label:"Lowest Price"},{value:"highest-price",label:"Highest Price"}];function D(){const{state:c,dispatch:l}=i.exports.useContext(u),s=c.productsData,[d,p]=i.exports.useState(!0),n=i.exports.useRef([]);i.exports.useEffect(()=>{const e=m(b,h("GET"));e.then(r=>l({type:"receiveProductsData",payload:r})),e.then(()=>p(!1))},[]),i.exports.useEffect(()=>{},[]);const f=e=>{const r=e.target.value;console.log(r),n.current.map(a=>{a.className.includes("active")&&a.classList.remove("active")}),e.target.classList.add("active"),l({type:"sortByPrice",payload:r}),e.preventDefault()};return o(g,{children:[o("div",{className:"product-section-header",children:[t("div",{className:"product-section-header-title",children:t("h3",{className:"product-section-title",children:"Tech Products"})}),o("div",{className:"product-section-header-filter",children:[t("div",{className:"product-section-header-filter-category",children:o("form",{className:"form-filter-category",children:[t("label",{htmlFor:"filter",children:"Filter by"}),o("select",{onChange:e=>{const r=e.target.value;l({type:"filterByCategory",payload:r})},className:"select-filter-category",name:"filter",id:"filter",children:[t("option",{value:"all",children:"All products"}),(()=>{var r;const e=(r=c==null?void 0:c.productsData)==null?void 0:r.map(a=>a.category);return[...new Set(e)]})().map(e=>t("option",{value:e,children:e},e))]})]})}),o("div",{className:"product-section-header-filter-price",children:[t("span",{children:"Sort by"}),t("div",{className:"filter-price-options-container",children:w.map((e,r)=>t("div",{className:"filter-price-option",children:t(y,{dynamicClass:"aeropay-filter",valueButton:e.value,buttonRef:a=>n.current[r]=a,handleClick:f,children:e.label})},e.value))})]})]})]}),d?t(v,{dynamicClass:"loading-products "}):t(x,{elementsArray:s})]})}export{D as default};
